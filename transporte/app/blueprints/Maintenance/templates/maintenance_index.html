<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css.css') }}">
</head>
<body>
    <h1>{{ title }}</h1>

    <p><a href="{{ url_for('maintenance.schedule_maintenance') }}">â• Agendar Nova ManutenÃ§Ã£o Preditiva</a> | 
       <a href="{{ url_for('maintenance.perform_maintenance') }}">ğŸ“ Registrar ManutenÃ§Ã£o Realizada</a></p>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
                <li class="{{ category|default('info') }}">{{ message|safe }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    
    <hr>
    
    <h2>ğŸš¨ Alertas de ManutenÃ§Ã£o PrÃ³xima (Baseado em KM ou Data)</h2>
    
    {% if alerts %}
        <table border="1">
            <thead>
                <tr>
                    <th>VeÃ­culo</th>
                    <th>DescriÃ§Ã£o</th>
                    <th>Alerta</th>
                    <th>AÃ§Ã£o</th>
                </tr>
            </thead>
            <tbody>
                {% for alert in alerts %}
                <tr>
                    <td>{{ alert.veiculo }}</td>
                    <td>{{ alert.descricao }}</td>
                    <td><strong>{{ alert.urgency }}</strong></td>
                    <td><a href="{{ url_for('maintenance.perform_maintenance', preditivo=alert.id) }}">Registrar RealizaÃ§Ã£o</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>ğŸ‰ Nenhum alerta de manutenÃ§Ã£o preditiva encontrado no momento!</p>
    {% endif %}

    <p><a href="{{ url_for('auth.dashboard') }}">Voltar ao Dashboard</a></p>
</body>
</html>
